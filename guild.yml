- model: spotify
  sourcecode:
    - "*.py"
    - "*.h5"
  operations:
    segment-breath:
      main: synthesis.breath.segment
      requires: breath-npz
    detect-breath:
      main: synthesis.breath.detect
      flags-import: all
      requires:
        - zcrgrams
    zcrgrams:
      main: synthesis.breath.zcrgrams
      flags-import: all
      requires:
        - audio-wav
    convert-audio:
      main: synthesis.datadownload.convert
      requires:
        - audio-ogg
    download-audio:
      main: synthesis.datadownload.download.audio
      flags-import: all
    download-transcripts:
      main: synthesis.datadownload.download.transcripts
      flags-import: all
    merge-transcripts:
      main: synthesis.filtering.transcripts_merging
      
    filter-segments:
      main: synthesis.filtering.audio_filtering
      requires:
        - segments-transcript-json
  resources:
    breath:
      path: breath
      sources:
        - operation: segment-breath
    breath-npz:
      path: breath
      sources:
        - operation: detect-breath
    zcrgrams:
      path: zcrgrams
      sources:
        - operation: zcrgrams
    transcripts:
      path: transcripts
      sources:
        - operation: download-transcripts
    audio-wav:
      path: audio
      sources:
        - operation: convert-audio
    audio-ogg:
      path: audio
      sources:
        - operation: download-audio
    segments-json:
      path: segments
      sources:
        - operation: 
    segments-transcript-json:
      path: segments
      sources:
        - operation: merge-transcripts
    segments-filtered-json:
      path: segments
      sources:
        - operation: filter-segments
